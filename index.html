<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roleta Simples</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    padding: 2rem;
  }
  #roleta {
    position: relative;
    width: 320px;
    height: 320px;
    border-radius: 50%;
    border: 6px solid #555;
    box-shadow: 0 0 20px #000;
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: auto;
    border-radius: 50%;
  }
  #seta {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 30px solid #e74c3c;
    z-index: 10;
  }
  #botaoGirar {
    margin-top: 20px;
    padding: 1rem 2rem;
    font-size: 1.2rem;
    cursor: pointer;
    background: #e74c3c;
    border: none;
    border-radius: 6px;
    color: white;
    transition: background 0.3s;
  }
  #botaoGirar:hover {
    background: #c0392b;
  }
  #resultado {
    margin-top: 20px;
    font-size: 1.3rem;
    min-height: 2rem;
    text-align: center;
  }
</style>
</head>
<body>

<h1>Roleta Simples</h1>

<div id="roleta">
  <div id="seta"></div>
  <canvas id="canvas" width="320" height="320"></canvas>
</div>

<button id="botaoGirar">Girar Roleta</button>

<div id="resultado"></div>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const resultado = document.getElementById('resultado');
  const botaoGirar = document.getElementById('botaoGirar');

  const premios = [
    { nome: "Manual & Chiclete", cor: "#1abc9c", peso: 20 },
    { nome: "Ã“culos 3D", cor: "#3498db", peso: 20 },
    { nome: "Chifres", cor: "#9b59b6", peso: 20 },
    { nome: "Chifres Majestosos Malignos", cor: "#e67e22", peso: 20 },
    { nome: "ðŸ¥š Ovo de Pesar Noturno", cor: "#8e44ad", peso: 2 },
    { nome: "ðŸ¥š Ovo de Kiel", cor: "#9b59b6", peso: 2 },
    { nome: "ðŸ¥š Ovo de Freoni", cor: "#34495e", peso: 2 },
    { nome: "Passaporte Manual de Combate", cor: "#f39c12", peso: 3 },
    { nome: "Jantar com o Rufio", cor: "#e74c3c", peso: 40 }
  ];

  const totalPesos = premios.reduce((acc, p) => acc + p.peso, 0);
  const anguloPorFatia = 2 * Math.PI / premios.length;
  let anguloAtual = 0;
  let girando = false;

  function desenharRoleta() {
    const centroX = canvas.width / 2;
    const centroY = canvas.height / 2;
    const raio = Math.min(centroX, centroY) - 10;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for(let i = 0; i < premios.length; i++) {
      const inicio = anguloPorFatia * i - Math.PI / 2;
      const fim = inicio + anguloPorFatia;

      // Desenha fatia
      ctx.beginPath();
      ctx.moveTo(centroX, centroY);
      ctx.arc(centroX, centroY, raio, inicio, fim);
      ctx.closePath();
      ctx.fillStyle = premios[i].cor;
      ctx.fill();
      ctx.strokeStyle = '#222';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Desenha texto
      ctx.save();
      ctx.translate(centroX, centroY);
      ctx.rotate(inicio + anguloPorFatia / 2);
      ctx.textAlign = "right";
      ctx.fillStyle = "#fff";
      ctx.font = "bold 14px Arial";
      ctx.fillText(premios[i].nome, raio - 10, 5);
      ctx.restore();
    }
  }

  desenharRoleta();

  function escolherPremio() {
    let rand = Math.random() * totalPesos;
    for (let i = 0; i < premios.length; i++) {
      rand -= premios[i].peso;
      if (rand <= 0) return i;
    }
    return 0;
  }

  botaoGirar.addEventListener('click', () => {
    if (girando) return;
    girando = true;
    resultado.textContent = "";
    const indiceEscolhido = escolherPremio();

    // Gira 5 voltas + posiÃ§Ã£o do prÃªmio escolhido
    const giroFinal = 360 * 5 + (360 - (indiceEscolhido * 360 / premios.length) - (360 / premios.length) / 2);
    const giroFinalRad = (giroFinal * Math.PI) / 180;

    let inicioRotacao = anguloAtual;
    let duracao = 5000; // 5 segundos
    let inicioTempo = null;

    function animar(timestamp) {
      if (!inicioTempo) inicioTempo = timestamp;
      const tempoDecorrido = timestamp - inicioTempo;
      const progresso = Math.min(tempoDecorrido / duracao, 1);

      // Ease out cubic
      const easeOut = 1 - Math.pow(1 - progresso, 3);
      anguloAtual = inicioRotacao + easeOut * giroFinalRad;
      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(anguloAtual);
      ctx.translate(-canvas.width / 2, -canvas.height / 2);
      desenharRoleta();

      if (progresso < 1) {
        requestAnimationFrame(animar);
      } else {
        girando = false;
        resultado.textContent = `VocÃª ganhou: ${premios[indiceEscolhido].nome}`;
      }
    }

    requestAnima

